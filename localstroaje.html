<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ToDo list Localstroag</title>
</head>

<style>
    body {
        display: flex;
        justify-content: center;
        align-items: center;

        background-color: rgb(13, 219, 202);
    }

    li {
        display: flex;
        justify-content: space-between;
        margin: 10px;
        padding: 5px;

        color: rgb(240, 240, 232);


        font-weight: 700;
        /* background-color: cornflowerblue; */

    }

    li:nth-child(even) {

        border-bottom: 1px solid greenyellow;
        border-right: 1px solid greenyellow;
        border-left: 1px solid greenyellow;

    }

    li:nth-child(odd) {

        border-bottom: 1px solid rgb(255, 0, 200);
        border-right: 1px solid rgb(255, 0, 200);
        border-left: 1px solid rgb(255, 0, 200);
    }

    button {

        color: white;
        background-color: rgba(0, 46, 250, 0.863);
    }

    .continer {
        width: 90%;
        max-width: 520px;
        background-color: black;
        color: white;
        box-shadow: 10px 10px 10px rgba(55, 56, 56, 0.699);
        
    }

    .UserInput {

        display: flex;
        justify-content: center;
        flex-wrap: wrap;

        text-align: center;
        max-width: 100%;

        background-color: black;
        padding: 7px;

        
        margin-bottom: 7px;
        border-bottom: 2px solid yellow;
    }

    .UserInput button {

        margin-right: 5px;
        margin-top: 1%;
        margin-bottom: 1%;

        font-size: 15px;
        font-weight: 800;
        color: rgb(251, 255, 0);
        background-color: rgba(72, 214, 224, 0.74);

        border-radius: 7px;
        box-shadow: 1px 1px 1px rgba(72, 214, 224, 0.699);
    }

    .UserInput input {

        width: 40%;
        min-width: 170px;
        padding: 4px;
        border-radius: 7px;
        margin-right: 5px;
        margin-top: 5px;
        margin-bottom: 5px;
        font-size: 15px;
        font-weight: 800;
    }

    #main {
        text-align: center;

    }

    #edit {
        display: none;
    }

    .locastroagevalue {
        width: 65%;
        margin-left: 10px;
        background-color: rgb(57, 59, 59);
        word-wrap: break-word;
    }
</style>

<body>

    <div class="continer">
        <div class="UserInput">
            <input type="text" name="" id="InputValue">
            <button id="submit" onclick="submit()">Add</button>
            <button id="edit">Edit</button>
            <button id="search" onclick="Searching()">search</button>
            <button id="submit" onclick="ClearLocalStroag()">clear</button>
        </div>
        <div id="main">

            <!-- enter js value -->

        </div>

    </div>

    <script>
        var inputValue = document.getElementById('InputValue')
        var SubmitBtn = document.getElementById('submit');
        var EditBtn = document.getElementById('edit');
        var main = document.getElementById('main');
        var localStorageValue

        //  ***********  page start focues  **********
        document.getElementById('InputValue').focus();
        //  *********** input par enter KeyPrees thay tyare submit function call thay  **********
        inputValue.addEventListener("keypress", function (event) {
            if (event.key == "Enter") {
                submit();
            }
        })



        //  ***********  clear localStroage Key   **********
        function ClearLocalStroag() {
            localStorage.clear();
            location.reload();
        }


        //  ***********  Delete Localstroage Value  **********
        function DeleteElement(i) {

            // ************** remove Element tag    ****************
            console.log(i);
            console.log(document.getElementById(`${i}`));
            main.removeChild(document.getElementById(`${i}`));

            // *********  remove Item for local stroage ***************

            console.log(localStorageValue);
            let localStorageReplace
            let UpdatedLocalStroageval
            localStorageValue.forEach(element => {
                console.log("element = " + element + "|");
                console.log("local element = " + localStorageValue[i]);
                if (localStorageValue[i] == element) {
                    console.log("remove element = " + localStorageValue[i]);
                    localStorageValue.splice(i, 1);
                }
            });


            localStorageReplace = localStorageValue + "";
            console.log("localStorageReplace = " + localStorageReplace.replace(/,/g, "|*"));
            UpdatedLocalStroageval = localStorageReplace.replace(/,/g, "|*");
            localStorage.setItem("UserValue", UpdatedLocalStroageval)


            if (localStorageValue.length == 0) {
                console.log("los length call ");
                localStorage.clear()
            }


            location.reload();



        }


        //  ***********  edit localStroage value  **********

        var Edit_Li_ID
        function EditElement(i) {
            console.log(localStorageValue[i]);
            SubmitBtn.style.display = 'none'
            EditBtn.style.display = 'block'
            inputValue.value = localStorageValue[i];

            // select edit element
            Edit_Li_ID = i
            console.log(Edit_Li_ID);
            return Edit_Li_ID;
        }

        EditBtn.addEventListener('click', () => {
            // var editValue = main.getElementsByTagName('li')[Edit_Li_ID];
            // var EditelementSelect = document.querySelectorAll(`.locastroagevalue `)[Edit_Li_ID];

            console.log(localStorageValue);
            console.log(localStorageValue[Edit_Li_ID]);

            localStorageValue[Edit_Li_ID] = inputValue.value;
            // var updatINdex = localStorageValue[Edit_Li_ID];
            // var updatedValue = inputValue.value;

            let localStorageReplace
            let EditLocalStroageval

            localStorageReplace = localStorageValue + "";
            console.log("localStorageReplace = " + localStorageReplace.replace(/,/g, "|*"));
            EditLocalStroageval = localStorageReplace.replace(/,/g, "|*");
            localStorage.setItem("UserValue", EditLocalStroageval)

            // localStorage.setItem("UserValue", localStorageValue);
            location.reload();

        })


        //  ***********  Add value localStroage  **********

        function submit() {
            if (inputValue.value == "") {
                alert("Enter the value first");
            }
            else if (localStorage.getItem("UserValue") != null && inputValue.value != null && inputValue.value != undefined) {
                localStorageValue = inputValue.value + "|*" + localStorage.getItem("UserValue");
                localStorage.setItem("UserValue", localStorageValue);
                location.reload();
                inputValue.value == "";
            } else {
                localStorageValue = inputValue.value;
                localStorage.setItem("UserValue", localStorageValue);
                location.reload();
                inputValue.value == "";

            }
        }

        //  ***********  Print value Localstroage   *************************************
        var li
        function PrintLocalStroagValue() {
            localStorageValue = localStorage.getItem("UserValue").split("|*");
            console.log(localStorageValue);

            for (let i = 0; i < localStorageValue.length; i++) {
                li = document.createElement('li');
                li.innerHTML = `
                                 ${[i]}
                                 <div class='locastroagevalue'>
                                     ${localStorageValue[i]} 
                                 </div>
                                 <div>
                                    <button class="${i}" onclick="EditElement(${i})" > ✏️ ${i}  </button>  
                                    <button class="${i}" onclick="DeleteElement(${i})" > ❎ ${i} </button>
                                 </div> `;
                li.id = i;
                main.appendChild(li);
            }

        }
        PrintLocalStroagValue();



        // ********* *** search  **************

        function Searching() {

            let filter = document.getElementById('InputValue').value.toUpperCase();
            let div = document.getElementById('main');
            let li = div.getElementsByTagName('li');

            console.log(li);

            for (var i = 0; i < li.length; i++) {
                // console.log(li[i]);
                var LiValue = li[i];
                var textValue = LiValue.textContent || LiValue.innerHTML;
                console.log(textValue.toUpperCase());
                // console.log(indexOf(filter));
                if (textValue.toUpperCase().indexOf(filter) > -1) {
                    li[i].style.display = '';
                } else {
                    li[i].style.display = 'none';
                }
            }

        }




    </script>


</body>



</html>